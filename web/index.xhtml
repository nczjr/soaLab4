<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head></h:head>
<f:view>
   <h:body>
      <h:form>
         <h:panelGroup>
            <h:outputLabel value="Brand     "/>
               <h:selectOneMenu
                    value="#{carHandler.brand}"
                    onchange="submit()"
                    valueChangeListener="#{carHandler.updateModels}">
               <f:selectItems value="#{carHandler.carsMap.keySet()}"/>
            </h:selectOneMenu>
         </h:panelGroup>

         <h:panelGroup><br />
            <h:outputLabel value="Model     "/>
            <h:selectOneMenu>
               <f:selectItems value="#{carHandler.models}"/>
            </h:selectOneMenu>
         </h:panelGroup>


         <h:panelGroup><br />
            <h:outputLabel value="Engine    "/>
            <h:selectOneMenu>
               <f:selectItems value="#{carHandler.engineTypes}"/>
            </h:selectOneMenu>
         </h:panelGroup>

         <h:panelGroup><br />
             <h:outputLabel value="Price rane    "/>
            <h:inputText id="priceRange" value="#{carHandler.price}">
             <f:validateRegex pattern="\d+-\d+" />
            </h:inputText>
             <h:message for="priceRange" style="color:red" />
         </h:panelGroup>

         <h:panelGroup><br />
            <h:outputLabel value="Name  "/>
            <h:inputText value="#{carHandler.clientName}" id="clientName">
               <f:ajax event="change" render="submit"/>
            </h:inputText>
         </h:panelGroup>

         <h:panelGroup><br />
             <h:outputLabel value="Telephone number     "/>
            <h:inputText value="#{carHandler.telephoneNumber}" id="telephoneNumber">
               <f:ajax event="change" render="submit"/>
            </h:inputText>
         </h:panelGroup>

         <h:panelGroup><br />
            <h:commandButton id="submit" action="result" value="Submit" disabled="#{empty carHandler.clientName or empty carHandler.telephoneNumber}"/>
            <h:commandButton value="Reset" type="reset"/>
         </h:panelGroup>

      </h:form>
   </h:body>
</f:view>
</html>
